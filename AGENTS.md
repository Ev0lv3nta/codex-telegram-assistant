# Vault ассистента (Codex)

Этот репозиторий — долгосрочная память ассистента. История чата не считается надежной памятью.
Если сомневаешься, лучше запиши в vault, чтобы потом это можно было найти.

## Зачем это

- Сохранять входящие (например, из Telegram) в поисковый архив.
- Вести простой дневник по дням ("что было сегодня") с короткими резюме.
- Держать немного "долгоживущих" справочников (люди, прочитать позже, проекты) без хаоса.

## Карта папок (не придумывай новые верхнеуровневые папки)

- `00_inbox/`: сырье (1 сообщение/файл = 1 элемент). Не удалять. Почти не переименовывать.
- `01_capture/daily/`: дневник `YYYY-MM-DD.md` (главная лента событий).
- `01_capture/transcripts/`: длинные транскрипты (голосовые/созвоны), если в daily слишком много.
- `01_capture/notes/`: редкие длинные конспекты/заметки (конференции, лонгриды).
- `01_capture/read_later.md`: единый список "прочитать/посмотреть позже".
- `02_distill/`: опциональные выжимки (только по явной просьбе).
- `04_projects/`: папки проектов (только когда это реально "долгоиграющее").
- `04_projects/_index.md`: краткий список активных проектов.
- `88_files/`: документы (pdf/doc/zip/etc), по возможности сохранять исходные имена.
- `89_images/`: картинки/скриншоты.
- `90_memory/people/`: 1 файл на человека (контакты + контекст).
- `90_memory/people/_index.md`: быстрый индекс людей.
- `90_memory/recipes.md`: все рецепты здесь (без отдельных файлов на рецепт по умолчанию).
- `99_process/`: процессы, шаблоны, журнал изменений ассистента.
- `system/`: исполняемая часть (не трогать без явного запроса).
- `.agents/skills/`: project skills (не трогать без явного запроса).

## Базовый поток (интейк)

Для каждого нового входящего:

1. Всегда добавь запись в `01_capture/daily/YYYY-MM-DD.md`.
2. Запись короткая: что это, зачем, где сырье (`00_inbox/...`) и ссылка/путь на вложение.
3. Если это "долгоживущая" сущность, дополнительно обнови:
   - "прочитать позже" -> `01_capture/read_later.md`
   - контакт/инфа о человеке -> `90_memory/people/<person>.md` + `90_memory/people/_index.md`
   - рецепт -> `90_memory/recipes.md`
   - проект -> `04_projects/<project>/...` (только если явно нужно и это не разовая заметка)

## Правила создания файлов (анти-хаос)

Главный риск — "100500 папок/файлов". Поэтому:

- Предпочитай дописывать в существующие файлы, а не создавать новые.
- Не создавай новые директории, кроме уже существующих в структуре.
- Глубина папок: максимум 2 уровня от корня (исключение: внутри `04_projects/<project>/`).
- Новые `md` допускаются только для:
  - нового человека в `90_memory/people/<person>.md`
  - нового проекта в `04_projects/` (по необходимости / по запросу)
  - длинного текста в `01_capture/transcripts/` или `01_capture/notes/`
  - процессных файлов в `99_process/` (редко)
- Если не уверен, куда это класть: записывай только в daily и задай 1 уточняющий вопрос.

## Формат daily

Файл дня: `01_capture/daily/YYYY-MM-DD.md`

На каждую запись:

- Короткий заголовок (1 строка)
- Контекст (источник: Telegram / web / etc)
- Ссылки/пути (на `00_inbox/` и/или вложения)
- Опционально: "следующий шаг" (если пользователь просил действие)

## Длинные голосовые / дампы текста

Если текста много (примерно > 2000-3000 слов):

- Полный текст в `01_capture/transcripts/YYYY-MM-DD-<slug>.md`
- В daily:
  - резюме 5-10 строк
  - ссылка на транскрипт
  - извлеченные факты (контакты, ссылки "на потом", и т.п.)

## Поиск и ответы

- Сначала простой поиск: названия файлов, заголовки, `rg` по ключевым словам.
- Для быстрых ответов сначала смотреть:
  - `90_memory/people/_index.md`
  - `01_capture/read_later.md`
  - `04_projects/_index.md`
  - последние daily-файлы
- В ответе указывать пути к файлам-источникам.

## Режим обслуживания (саморедактирование)

Не правь `system/`, `.agents/skills/` и `AGENTS.md`, если пользователь явно этого не попросил.
Если правки были, добавь короткую запись в `99_process/assistant_changelog.md`.
